<h1>Welcome to the tasks </h1>
<%= form_with model: @task, url: new_task_path do |form| %>
    <% if @task.errors.any? %>
        <div id="error_explanation">
            <h2><%= pluralize(@task.errors.count, "error") %> prohibited this @task from being saved:</h2>
            <ul>
                <% @task.errors.each do |error| %>
                <li><%= error.full_message %></li>
                <% end %>
            </ul>
        </div>
    <% end %>

    <div class="form-group">
        <%= form.text_field :title, class: "form-control", placeholder: "Enter task title" %>
    </div>
    <div class="form-group">
        <%= form.label :Due_date %><br />
        <%= form.date_select :due_date, class: "form-control" %>
    </div>
    <%
=begin%>
 <div class="form-group">
    <%= form.file_field :image %>
    </div>
     
<%
=end%>
    <div class="field">
        <%= form.label :Task_type %><br />
        <%= form.select :task_type, Task.task_types.keys, autofocus: true, autocomplete: "" %>
    </div>
    
    <div class="field">
        <%= form.label :Registered_businesses %><br />  
        <% form.select :"business_id", options_for_select(Business.all.pluck(:b_name)) %>
        <%= form.select :business_id, Business.all.map { |b| [b.b_name, b.id] }, autofocus: true, autocomplete: "" %>
    </div>
    
<div class="mb-3">
    <%= form.submit "Create Task", class: "btn btn-primary" %>
</div>
<% end %>

<h1>Business Tasks</h1>
<% render "index", tasks: @tasks %>


<h1>Business Tasks</h1>
<% if !@tasks.blank? %>
    <% for item in @tasks %>
        <div class="jumbotron">
         <h1 class="display-4"><%= item.title %></h1>
         <p class="lead"><strong>DATE:</strong>
             <%= item.due_date %>
         </p>

        </div>
      
    <% end %>
<% end %>